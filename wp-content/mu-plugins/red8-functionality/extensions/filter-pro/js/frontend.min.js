jQuery(document).ready(function($){function get_filters_for_post(){loading||(filters={},$('.filter_pro_page .filters .radio_filter input[type="radio"]').each(function(e){$(this).is(":checked")&&"none"!=$(this).val()&&(filters[$(this).attr("name")]=$(this).val())}),$('.filter_pro_page .filters .checkbox_filter input[type="checkbox"]').each(function(e){if($(this).is(":checked"))if(filters[$(this).attr("name")]){var index=filters[$(this).attr("name")].length;filters[$(this).attr("name")][index]=$(this).val()}else filters[$(this).attr("name")]=new Array($(this).val())}),$(".filter_pro_page .filters .select_filter option").each(function(e){$(this).is(":selected")&&"none"!=$(this).val()&&(filters[$(this).parent().attr("name")]=$(this).val())}),$("html, body").animate({scrollTop:$filteredContent.offset().top-100},2e3),currentPage=1,filter_posts())}if($(".filter_pro_page").length){var loading=!1,$filteredContent=$("#filtered_posts"),filters={},post_type=$(".filter_pro_page > #filter_posts_post_type").val(),posts_per_page=$(".filter_pro_page > #filter_posts_posts_per_page").val(),orderby=$(".filter_pro_page > #filter_posts_orderby").val(),order=$(".filter_pro_page > #filter_posts_order").val(),load_more_text=$(".filter_pro_page > #filter_posts_load_more_text").val(),filter_id=null;$(".filter_pro_page > #filter_posts_filter_id").length&&(filter_id=$(".filter_pro_page > #filter_posts_filter_id").val());var excluded_posts=new Array,currentPage=1,filter_posts=function(){var data={action:"load_filtered_results",paged:currentPage,filters:filters,post_type:post_type,ppp:posts_per_page,orderby:orderby,order:order,excluded_posts:excluded_posts,load_more_text:load_more_text,filter_id:filter_id};$.ajax({type:"POST",url:ajaxObject.ajax_url,data:data,beforeSend:function(){1==currentPage?($filteredContent.empty(),$filteredContent.append('<div id="temp_load" style="text-align:center; margin: 10px 0; width: 100%;"><img style="display: inline-block;" src="'+ajaxObject.plugin_url+'/images/ajax-loader.gif" /></div>')):($filteredContent.find(".load_more_results").remove(),$filteredContent.append('<div id="temp_load" style="text-align:center; margin: 10px 0; width: 100%;"><img style="display: inline-block;" src="'+ajaxObject.plugin_url+'/images/ajax-loader.gif" /></div>')),loading=!0},success:function(returnData){returnData.length?(1==currentPage?($filteredContent.hide(),$filteredContent.append(returnData),$("#temp_load").remove(),$filteredContent.fadeIn(500,function(){loading=!1})):($filteredContent.append(returnData),$("#temp_load").remove(),$filteredContent.fadeIn(500,function(){loading=!1})),currentPage++):($("#temp_load").remove(),loading=!1)},error:function(xhr,textStatus,errorThrown){$("#temp_load").remove()}})};filter_posts(),$('.filter_pro_page .filters .radio_filter input[type="radio"]').change(function(){get_filters_for_post()}),$('.filter_pro_page .filters .checkbox_filter input[type="checkbox"]').change(function(){get_filters_for_post()}),$(".filter_pro_page .filters .select_filter").change(function(){get_filters_for_post()}),$("#filtered_posts").on("click",".load_more_results",function(e){e.preventDefault(),excluded_posts=new Array,"rand"==orderby&&$("#filtered_posts .filtered_post").each(function(e){excluded_posts.push($(this).find("h3 a").attr("href"))}),filter_posts()})}});