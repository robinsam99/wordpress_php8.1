jQuery(document).ready(function($){function change_taxonomy_terms(){filtered_taxonomies=new Array,$(".filter_pro_sc_taxonomies option:selected").each(function(e){filtered_taxonomies.push($(this).val())}),get_tax_terms()}$(".filter_pro_wrap .available_shortcodes a").click(function(e){e.preventDefault();var caretPos=document.getElementById("filter_pro_plugin_results_format").selectionStart,textAreaTxt=$("#filter_pro_plugin_results_format").val(),txtToAdd=$(this).text();$("#filter_pro_plugin_results_format").val(textAreaTxt.substring(0,caretPos)+txtToAdd+textAreaTxt.substring(caretPos))}),$(".filter_pro_settings #add_filter_pro_shortcode").length&&$(".filter_pro_settings #add_filter_pro_shortcode").remove();var filtered_post_types=new Array;$(".filter_pro_sc_post_types").on("change","select",function(e){filtered_post_types=new Array,$(".filter_pro_sc_post_types option:selected").each(function(e){filtered_post_types.push($(this).val())}),get_taxonomies($(".filter_pro_sc_taxonomies #filter_pro_taxonomies"),!0)}),$(".filter_pro_widget_wrapper").on("change","#filter_pro_widget_post_types",function(e){filtered_post_types=$(this).val(),get_taxonomies($(this).parent().parent().find("#filter_pro_widget_taxonomies"),!1)});var filtered_taxonomies=new Array;$(".filter_pro_sc_taxonomies").on("change","select",function(e){change_taxonomy_terms()}),$("#create_shortcode_button").click(function(e){e.preventDefault();var post_types=new Array;$(".filter_pro_sc_post_types select option:selected").each(function(e){post_types.push($(this).val())});var taxonomies=new Array;$(".filter_pro_sc_taxonomies select option:selected").each(function(e){taxonomies.push($(this).val())});var style=$('.filter_pro_sc_style input[type="radio"]:checked').val(),excluded_terms=new Array;$(".filter_pro_sc_terms select option:selected").each(function(e){excluded_terms.push($(this).val())});var orderby=$(".filter_pro_sc_orderby select option:selected").val(),order=$(".filter_pro_sc_order select option:selected").val(),number=$('.filter_pro_sc_number input[type="number"]').val(),load_more_text=$('.filter_pro_sc_lmt input[type="text"]').val(),filter_id=$('.filter_pro_filter_id input[type="text"]').val();filter_id=filter_id.replace(" ","_");var shortcode_text="[filter_pro";if(post_types.length){for(var post_type_string="",i=0;i<post_types.length;i++)post_type_string+=i==post_types.length-1?post_types[i]:post_types[i]+", ";shortcode_text+=' post_types="'+post_type_string+'"'}if(taxonomies.length){for(var taxonomies_string="",i=0;i<taxonomies.length;i++)taxonomies_string+=i==taxonomies.length-1?taxonomies[i]:taxonomies[i]+", ";shortcode_text+=' taxonomies="'+taxonomies+'"'}if(style&&(shortcode_text+=' style="'+style+'"'),excluded_terms.length){for(var excluded_terms_string="",i=0;i<excluded_terms.length;i++)excluded_terms_string+=i==excluded_terms.length-1?excluded_terms[i]:excluded_terms[i]+", ";shortcode_text+=' excluded_terms="'+excluded_terms+'"'}orderby&&(shortcode_text+=' orderby="'+orderby+'"'),order&&(shortcode_text+=' order="'+order+'"'),number&&(shortcode_text+=' number="'+number+'"'),load_more_text&&(shortcode_text+=' load_more_text="'+load_more_text+'"'),filter_id&&(shortcode_text+=' filter_id="'+filter_id+'"'),shortcode_text+="]",$(".generated_shortcode").val(shortcode_text),$(".generated_shortcode").css("display","block"),$("#add_filter_pro_shortcode").css("display","block")}),$("#add_filter_pro_shortcode").click(function(e){e.preventDefault(),tinyMCE.activeEditor.execCommand("mceInsertContent",0,$(".generated_shortcode").val())});var get_taxonomies=function($container,terms){var data={action:"filter_pro_shortcode_get_taxonomies",post_types:filtered_post_types,terms:terms};$.ajax({type:"POST",url:ajaxObject.ajax_url,data:data,beforeSend:function(){$container.empty(),$container.css("display","none")},success:function(returnData){returnData.length&&($container.html(returnData),$container.css("display","block")),terms&&change_taxonomy_terms()},error:function(xhr,textStatus,errorThrown){terms&&change_taxonomy_terms()}})},get_tax_terms=function(){var data={action:"filter_pro_shortcode_get_terms",taxonomies:filtered_taxonomies};$.ajax({type:"POST",url:ajaxObject.ajax_url,data:data,beforeSend:function(){$(".filter_pro_sc_terms #excluded_terms").empty(),$(".filter_pro_sc_terms #excluded_terms").css("display","none")},success:function(returnData){returnData.length&&($(".filter_pro_sc_terms #excluded_terms").html(returnData),$(".filter_pro_sc_terms #excluded_terms").css("display","block"))},error:function(xhr,textStatus,errorThrown){}})}});